/* empty css                  */import{v as O}from"./el-loading.4b1d594b.js";import{E as F,a as $}from"./el-tag.c39896d7.js";import"./el-tooltip.53f64348.js";import{E as A}from"./el-scrollbar.8e7f6198.js";import{E as H}from"./el-link.7eebcc44.js";import{s as g}from"./index.bd075e55.js";import{ax as j,r as u,Z as P,$ as W,F as Z,W as q,o as v,g as G,C as n,M as a,w as o,S as J,f as K,aB as c,V as b,k as C,t as w,aE as Q}from"./index.6c9c4166.js";import{u as R}from"./index.6ca5197f.js";import{_ as X}from"./_plugin-vue_export-helper.cdc0426e.js";import"./debounce.01570010.js";import"./index.8331befd.js";const Y={class:"share-button-content"},ee={class:"cancel-button-content"},te={class:"share-list-content"},ae={class:"share-name-content"},oe={style:{cursor:"pointer"}},ne={class:"share-operation-content"},re={__name:"index",setup(se){const{toClipboard:y}=R(),x=j(),_=u([]),E=u(window.innerHeight-200),i=u([]),h=u(!0),m=()=>{h.value=!0,g.getShares(e=>{h.value=!1,_.value=e.data},e=>{h.value=!1,c.error(e.message)})};P(()=>{x.setSearchFlag(!1),m()});const f=e=>{Q.confirm("Sharing will not be recoverable after cancellation, are you sure about this?","Cancel Share",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(()=>{g.cancelShare({shareIds:e},()=>{c.success("Cancel Share Successfully"),m()},t=>{c.error(t.message)})})},k=()=>{if(i.value&&i.value.length>0){let e=new Array;i.value.forEach(t=>{e.push(t.shareId)}),f(e.join("__,__"));return}c.error("Please select the share to cancel")},B=e=>{f(e.shareId)},T=e=>{i.value=e},U=(e,t,r,d)=>{b.showOperation(r)},M=(e,t,r,d)=>{b.hiddenOperation(r)},I=(e,t,r,d)=>e.shareStatus===1?"Shared files have been deleted":e.shareDayType===0?"permanently valid":e.shareEndTime+"expired",N=async e=>{try{let t="Url:"+e.shareUrl+`
Share Code:`+e.shareCode+`
Share it with your friends!`;await y(t),c.success("Copy Success")}catch(t){console.error(t),c.error("Copy failed")}};return(e,t)=>{const r=W("SwitchButton"),d=Z,p=q,s=F,S=A,D=H,L=$,V=O;return v(),G("div",null,[n("div",Y,[n("div",ee,[a(p,{type:"danger",size:"default",round:"",onClick:k},{default:o(()=>[t[0]||(t[0]=C(" Cancel Share ")),a(d,{class:"el-icon--right"},{default:o(()=>[a(r)]),_:1})]),_:1})])]),n("div",te,[J((v(),K(L,{ref:"shareTable",data:_.value,height:E.value,"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:T,onCellMouseEnter:U,onCellMouseLeave:M},{default:o(()=>[a(s,{type:"selection",width:"55"}),a(s,{label:"Share Name",prop:"shareName",sortable:"","show-overflow-tooltip":"","min-width":"750"},{default:o(l=>[n("div",ae,[t[1]||(t[1]=n("i",{class:"fa fa-share-alt",style:{"margin-right":"15px","font-size":"20px",cursor:"pointer"}},null,-1)),n("span",oe,w(l.row.shareName),1)]),n("div",ne,[a(S,{class:"item",effect:"light",content:"Copy Url",placement:"top"},{default:o(()=>[a(p,{type:"success",size:"small",circle:"",onClick:z=>N(l.row),icon:"Link"},null,8,["onClick"])]),_:2},1024),a(S,{class:"item",effect:"light",content:"Cancel Share",placement:"top"},{default:o(()=>[a(p,{type:"danger",size:"small",circle:"",onClick:z=>B(l.row),icon:"SwitchButton"},null,8,["onClick"])]),_:2},1024)])]),_:1}),a(s,{prop:"shareUrl",sortable:"",align:"center",label:"Share Url","min-width":"300"},{default:o(l=>[a(D,{type:"primary",href:l.row.shareUrl,target:"_blank"},{default:o(()=>[C(w(l.row.shareUrl.substring(0,30)+"..."),1)]),_:2},1032,["href"])]),_:1}),a(s,{prop:"shareCode",sortable:"",align:"center",label:"Share Code","min-width":"140"}),a(s,{prop:"createTime",sortable:"",align:"center",label:"Create Time","min-width":"240"}),a(s,{prop:"shareStatus",sortable:"",label:"Share Status","min-width":"240",align:"center",formatter:I})]),_:1},8,["data","height"])),[[V,h.value]])])])}}},ve=X(re,[["__scopeId","data-v-607bc1c1"]]);export{ve as default};
